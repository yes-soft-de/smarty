!function(e){e.fn.liveEdit=function(t){var i,a,s,n,c,o,r=e.extend({afterSaveAll:function(e,t){},doubleClick:function(e,t,i){}},e.fn.liveEdit.defaults,t),l=[],d=function(){s.removeClass("appear"),s.css("top","-999px"),s.css("left","-999px")},u=function(t){e(t.focusNode).closest("b").length>0?s.addClass("bold"):s.removeClass("bold"),e(t.focusNode).closest("i").length>0?s.addClass("italic"):s.removeClass("italic"),e(t.focusNode).closest("li").length>0?s.addClass("unorderedlist"):s.removeClass("unorderedlist"),e(t.focusNode).closest("strike").length>0?s.addClass("strikethrough"):s.removeClass("strikethrough"),e(t.focusNode).closest("a").length>0?s.addClass("url"):s.removeClass("url")},_=function(t){var i=window.getSelection();m(),h(e(i.focusNode).closest("[data-editable=true]")),e(t.target).closest(".text-options").length>0?u(i):(e(i.focusNode).closest("[data-editable=true]").length>0&&0==e(i.focusNode).closest("figure").length?(0===function(){var e=document.getSelection().anchorNode;return e&&3===e.nodeType?e.parentNode:e}().children.length&&e(i.focusNode).closest("[data-text-options=true]").length>0&&0==e(i.focusNode).closest("li").length&&0==e(i.focusNode).closest(".caption").length&&document.execCommand("formatBlock",!1,"p"),!0===i.isCollapsed&&!1===o&&d(),!1===i.isCollapsed?e(i.focusNode).closest("[data-text-options=true]").length>0&&(function(){var e=window.getSelection().getRangeAt(0).getBoundingClientRect();s.addClass("appear"),s.css("top",e.top-(s.height()+8)+window.pageYOffset+"px"),s.css("left",(e.left+e.right)/2-s.width()/2+"px")}(),u(i)):d()):d(),o=i.isCollapsed)},v=function(e){window.getSelection().addRange(lastSelection),document.execCommand("unlink",!1),""!==e&&(e.match("^(http|https)://")||(e="http://"+e),document.execCommand("createLink",!1,e))},m=function(){e.each(l,function(t,i){e(i).find("[data-editable=true]").each(function(){1==e(this).data("text-options")&&e(this).find("figure").each(function(){0===e(this).next("p").length&&e(this).after("<p><br></p>")})})})},h=function(t){e(t).find("span").each(function(){e(this).hasClass("caption")||e(this).contents().unwrap()})},f=function(){e.each(l,function(t,i){e(i).find("[data-editable=true]").each(function(){e(this).find("ul").each(function(){e(this).parent("p").length&&e(this).parent("p").contents().unwrap()})})})};return sidebarInterface='<div class="live-edit-sidebar" draggable="true"><a href="#" class="save-button">'+r.saveButtonLabel+"</a></div>",textOptionsInterface='<span class="text-options"><button class="url-button">'+r.urlButtonLabel+'</button><span class="input-text"><input type="text" name="liveedit-url" /></span><button class="bold-button">'+r.boldButtonLabel+'</button><button class="italic-button">'+r.italicButtonLabel+'</button><button class="strikethrough-button">'+r.strikethroughButtonLabel+'</button><button class="unorderedlist-button">'+r.unorderedlistButtonLabel+"</button></span>",e("body").append(textOptionsInterface),i=e(".live-edit-sidebar"),a=e(".live-edit-sidebar .save-button"),s=e(".text-options"),urlButton=e(".text-options .url-button"),urlField=e(".text-options span.input-text"),n=e(".text-options .bold-button"),c=e(".text-options .italic-button"),strikethroughButton=e(".text-options .strikethrough-button"),unorderedListButton=e(".text-options .unorderedlist-button"),a.on("click",function(){var t=[];return e.each(l,function(i,a){var s={},n=e(a).data("model"),c=e(a).data("id").toString(),o=e(a).data("url");s.model=n,s.id=c,s.url=o,e(a).find("[data-editable=true]").each(function(){var t=e(this).data("name"),i=e(this).html().replace(/\n/g,"").trim();s[t]=i}),t.push(s)}),r.afterSaveAll.call(this,t)}),urlButton.on("click",function(){s.hasClass("edit-url")?s.removeClass("edit-url"):(s.addClass("edit-url"),setTimeout(function(){var t=window.getSelection();e(t.focusNode).closest("a").length>0?e(urlField).find("input").val(e(t.focusNode).closest("a").attr("href")):document.execCommand("createLink",!1,"/"),lastSelection=window.getSelection().getRangeAt(0),o=!1,e(urlField).find("input").focus()},100))}),n.on("click",function(){document.execCommand("strong",!1,null)}),c.on("click",function(){document.execCommand("italic",!1)}),strikethroughButton.on("click",function(){document.execCommand("strikethrough",!1)}),unorderedListButton.on("click",function(){document.execCommand("insertunorderedlist",!1),d(),f()}),e(urlField).find("input").on("keydown",function(t){13===t.keyCode&&(t.preventDefault(),v(e(this).val()),e(this).blur())}),e(urlField).find("input").on("blur",function(t){s.removeClass("edit-url"),v(e(this).val()),e(this).val(""),u(window.getSelection().focusNode)}),e(document).on("keyup",_),e(document).on("mousedown",_),e(document).on("mouseup",function(e){setTimeout(function(){_(e)},1)}),e.fn.liveEdit.loadingState=function(e){"on"==e?i.addClass("loading-state"):i.removeClass("loading-state")},this.each(function(){l.push(this),e(this).find("[data-editable=true]").each(function(){!function(t){e(t).attr("contenteditable","true")}(this),function(t){e(t).find("a").click(function(e){e.preventDefault()})}(this),function(t){var i=e(t).data("max-length");i&&e(t).on("keypress",function(e){(e.target.innerText.length>i||13===e.keyCode)&&e.preventDefault()})}(this),function(t){e(t).on("paste",function(e){if(e.preventDefault(),e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData){var i="",a=e.originalEvent.clipboardData.getData("text/plain").split(/[\r\n]/g);for(p=0;p<a.length;p+=1)""!==a[p]&&(i+="<p>"+a[p]+"</p>");document.execCommand("insertHTML",!1,i),setTimeout(function(){h(t)},10)}})}(this),function(t){e(t).on("dblclick",function(){setTimeout(function(){var e=window.getSelection();if(!0===e.isCollapsed)return r.doubleClick.call(this,t,e)},10)})}(this)})})},e.fn.liveEdit.defaults={saveButtonLabel:"S",urlButtonLabel:"U",boldButtonLabel:"B",italicButtonLabel:"I",strikethroughButtonLabel:"ABC",unorderedlistButtonLabel:"L"}}(jQuery),jQuery(document).ready(function(e){e("#course-category-select").change(function(t){"new"===e(this).val()?e("#new_course_category").addClass("animate cssanim fadeIn load"):e("#new_course_category").removeClass("animate cssanim fadeIn load")}),e("#course-linkage-select").change(function(t){"add_new"===e(this).val()?e("#new_course_linkage").addClass("animate cssanim fadeIn load"):(e("#new_course_linkage").removeClass("animate cssanim fadeIn load"),e("#save_course_action").addClass("reload_page"))}),e(".date_box").datepicker({dateFormat:"yy-mm-dd",numberOfMonths:1,showButtonPanel:!0}),e(".remove_text_click").on("click",function(){e(this).text(),e(this).text("")}),e("body").delegate("*[data-help-tag]","click",function(t){var i=parseInt(e(this).attr("data-help-tag"));i--,e(".course-create-help li").removeClass("active"),e(".course-create-help li:eq("+i+")").addClass("active")}),e(".color_picker").each(function(){var t=e(this);t.css("background",t.val()),t.iris({width:200,hide:!0,change:function(e,i){t.css("background",i.color.toString())}})}),e(".color_picker").on("click",function(){e(this).parent().find(".iris-picker").toggle(100)}),e("#course_creation_tabs > ul > li").click(function(t){if(t.preventDefault(),!e(this).hasClass("active")&&e(this).parent().hasClass("islive")){var i=e(this).index();if(e(".islive li.active").removeClass("active"),void 0!=e(this).attr("class")){var a=e(this).attr("class");a=a.replace(" done","")}e(this).addClass("active"),e(".create_course_content > div").removeClass("active"),e(".edit_course_content > div").removeClass("active"),e(".course-create-help > ul").removeClass("active"),e("#"+a).length?e("#"+a).addClass("active"):(e(".create_course_content > div").eq(i).addClass("active"),e(".course-create-help > ul").eq(i).addClass("active")),e("#"+a+"_help").length&&(e("#"+a+"_help").addClass("active"),e("#"+a+"_help li:first-child").addClass("active"))}});var t;jQuery(".upload_image_button").on("click",function(e){var i=jQuery(this);t?t.open():((t=wp.media.frames.media_uploader=wp.media({title:i.data("uploader-title"),library:{type:"image",query:!1},button:{text:i.data("uploader-button-text")},multiple:i.data("uploader-allow-multiple")})).on("select",function(){var e=t.state().get("selection"),a=i.data("input-name");e.map(function(e){e=e.toJSON(),console.log(e);var t="";e.sizes&&(t=void 0!==e.sizes.thumbnail?e.sizes.thumbnail.url:void 0!==e.sizes.medium?e.sizes.medium.url:e.sizes.full.url),i.html('<img src="'+t+'" class="submission_thumb thumbnail" /><input id="'+a+'" class="post_field" data-type="featured_image" data-id="'+a+'" name="'+a+'" type="hidden" value="'+e.id+'" />')})}),t.open())});var i;jQuery(".upload_badge_button").on("click",function(e){var t=jQuery(this);i?i.open():((i=wp.media.frames.media_uploader=wp.media({title:t.data("uploader-title"),library:{type:"image",query:!1},button:{text:t.data("uploader-button-text")},multiple:t.data("uploader-allow-multiple")})).on("select",function(){var e=i.state().get("selection"),a=t.data("input-name");e.map(function(e){var i="";(e=e.toJSON()).sizes&&(i=void 0!==e.sizes.thumbnail?e.sizes.thumbnail.url:void 0!==e.sizes.medium?e.sizes.medium.url:e.sizes.full.url),t.html('<img src="'+i+'" class="submission_thumb thumbnail" /><input id="'+a+'" name="'+a+'" type="hidden" value="'+e.id+'" />')})}),i.open())}),e("#course-title,#new_course_category").click(function(){var t=e(this).attr("data-default"),i=e(this);i.html()==t&&(i.html(""),e("html").one("click",function(){i.html().length<1&&i.html(t)}),event.stopPropagation())}),e("#create_course_action").click(function(t){var i=e("#course-title").text(),a=e("#course-category-select").val(),s=e("#new_course_category").text(),n=e("#course-image").val(),c=e("#course_short_description").text(),o="",r="";if(""==i||/ENTER A COURSE TITLE/i.test(i))alert(wplms_front_end_messages.course_title);else{e("#course-linkage-select").length&&(o=e("#course-linkage-select").val()),e("#new_course_linkage").length&&(r=e("#new_course_linkage").text());var l=e(this),d=l.html();l.prepend('<i class="icon-sun-stroke animated spin"></i>'),l.addClass("disabled"),e.confirm({text:wplms_front_end_messages.create_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_course",security:e("#security").val(),title:i,category:a,newcategory:s,thumbnail:n,description:c,courselinkage:o,newcourselinkage:r},cache:!1,success:function(t){if(l.find("i").remove(),e.isNumeric(t)){var i=e("#course_creation_tabs li.active");i.removeClass("active"),e("#create_course").removeClass("active"),e("#create_course_help").removeClass("active"),i.addClass("done"),e("#course_creation_tabs li.done").next().addClass("active"),e("#course_settings").addClass("active"),e("#course_settings_help").addClass("active"),e("#security").after('<input type="hidden" id="course_id" value="'+t+'" />'),e("#course_creation_tabs ul").addClass("islive")}else l.html(t),setTimeout(function(){l.html(d)},2e3);l.removeClass("disabled")}})},cancel:function(){l.find("i").remove(),l.removeClass("disabled")},confirmButton:wplms_front_end_messages.create_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}}),e("#save_course_action").click(function(t){var i=e("#course_id").val(),a=e("#course-title").text(),s=e("#course-category-select").val(),n=e("#new_course_category").text(),c=e("#course-image").val(),o=e("#course_short_description").text(),r=e("#vibe_course_status:checked").val(),l="",d="";e("#course-linkage-select").length&&(l=e("#course-linkage-select").val()),e("#new_course_linkage").length&&(d=e("#new_course_linkage").text());var u=e(this),_=u.html();u.prepend('<i class="icon-sun-stroke animated spin"></i>'),u.addClass("disabled"),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_course",security:e("#security").val(),ID:i,status:r,title:a,category:s,newcategory:n,thumbnail:c,description:o,courselinkage:l,newcourselinkage:d},cache:!1,success:function(t){if(u.find("i").remove(),u.removeClass("disabled"),e.isNumeric(t))if(u.hasClass("reload_page"))location.reload();else{var i=e("#course_creation_tabs li.active");i.removeClass("active"),e("#create_course").removeClass("active"),e("#create_course_help").removeClass("active"),i.addClass("done"),e("#course_creation_tabs li.done").next().addClass("active"),e("#course_settings").addClass("active"),e("#course_settings_help").addClass("active")}else u.html(t),setTimeout(function(){u.html(_)},5e3)}})},cancel:function(){u.find("i").remove()},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),jQuery("#create_content").delegate(".switch-label","click",function(t){var i=e(this).parent(),a=e(this).parent().parent().parent().next();"H"==i.find(".switch-input:checked").val()?a.fadeIn(200):a.fadeOut(200)}),jQuery("body").delegate(".switch-subscription","click",function(t){var i=e(this).parent(),a=e(".product_duration");"S"==i.find(".switch-input:checked").val()?a.fadeIn(200):a.fadeOut(200)}),e("body").delegate("#save_course_settings","click",function(t){var i=e("#course_id").val(),a=e(".vibe_course_auto_eval:checked").val(),s=e("#vibe_pre_course").val(),n=e(".vibe_course_drip:checked").val(),c=e("#vibe_course_drip_duration").val(),o=e(".vibe_course_certificate:checked").val(),r=e("#vibe_course_passing_percentage").val(),l=e("#vibe_certificate_template").val(),d=e("#vibe_course_badge_percentage").val(),u=e(".vibe_badge:checked").val(),_=e("#vibe_course_badge").val(),v=e("#vibe_course_badge_title").val(),p=e("#vibe_max_students").val(),m=e("#vibe_start_date").val(),h=e("#vibe_course_retakes").val(),f=e("#vibe_group").val(),g=e("#vibe_forum").val(),b=e("#vibe_duration").val(),y=e("#vibe_course_instructions").html(),k=e("#vibe_course_message").html(),x=0;e("#course-level-select").length&&(x=e("#course-level-select").val());var C=e(this),w=C.html();C.prepend('<i class="icon-sun-stroke animated spin"></i>'),C.addClass("disabled"),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_course_settings",security:e("#security").val(),course_id:i,vibe_course_auto_eval:a,vibe_pre_course:s,vibe_course_drip:n,vibe_course_drip_duration:c,vibe_duration:b,vibe_certificate:o,vibe_course_passing_percentage:r,vibe_certificate_template:l,vibe_badge:u,vibe_course_badge_title:v,vibe_course_badge_percentage:d,vibe_course_badge:_,vibe_max_students:p,vibe_start_date:m,vibe_course_retakes:h,vibe_group:f,vibe_forum:g,vibe_course_instructions:y,vibe_course_message:k,level:x},cache:!1,success:function(t){if(C.find("i").remove(),C.removeClass("disabled"),e.isNumeric(t)){var i=e("#course_creation_tabs li.active");i.removeClass("active"),e("#course_settings").removeClass("active"),e("#course_settings_help").removeClass("active"),i.addClass("done"),e("#course_creation_tabs li.done").next().addClass("active"),e("#course_curriculum").addClass("active"),e("#course_curriculum_help").addClass("active")}else console.log(t),C.html(t),setTimeout(function(){C.html(w)},2e3)}})},cancel:function(){C.find("i").remove()},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("ul.curriculum").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer"}),e("body").delegate(".curriculum select.chosencpt","change",function(t){var i;"add_new"==e(this).val()?(e(this).parent().find(".new_unit_actions").fadeIn(200),e(this).parent().find(".new_quiz_actions").fadeIn(200),e(this).parent().find(".unit_actions").fadeOut(200),e(this).parent().find(".quiz_actions").fadeOut(200),e("#save_course_curriculum").addClass("disabled"),e(".new_unit_title,.new_quiz_title").focus()):(e(this).parent().find(".new_unit_actions").fadeOut(200),e(this).parent().find(".new_quiz_actions").fadeOut(200),e(this).parent().find(".unit_actions").fadeIn(200),e(this).parent().find(".quiz_actions").fadeIn(200),i=e(this).find("option:selected").attr("data-link")+"edit",e(this).parent().hasClass("new_unit")?e(this).parent().find(".edit_unit").attr("href",i):e(this).parent().find(".edit_quiz").attr("href",i),e("#save_course_curriculum").removeClass("disabled"))}),e("body").delegate(".new_unit_actions .publish","click",function(t){var i=e("#course_id").val(),a=e(this),s=a.closest(".new_unit_actions").find(".new_unit_title").val();a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.confirm({text:wplms_front_end_messages.create_unit_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_unit",security:e("#security").val(),course_id:i,unit_title:s},cache:!1,success:function(t){a.closest(".new_unit").html(t),e("#save_course_curriculum").removeClass("disabled")}})},cancel:function(){a.find("i").remove(),e("#save_course_curriculum").removeClass("disabled")},confirmButton:wplms_front_end_messages.create_unit_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".new_quiz_actions .publish","click",function(t){var i=e("#course_id").val(),a=e(this),s=a.closest(".new_quiz_actions").find(".new_quiz_title").val();a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.confirm({text:wplms_front_end_messages.create_quiz_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_quiz",security:e("#security").val(),course_id:i,quiz_title:s},cache:!1,success:function(t){a.closest(".new_quiz").html(t),e("#save_course_curriculum").removeClass("disabled")}})},cancel:function(){a.find("i").remove(),e("#save_course_curriculum").removeClass("disabled")},confirmButton:wplms_front_end_messages.create_quiz_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".new_q .publish","click",function(t){var i=e(this),a=i.closest(".new_q").find(".question_title").val(),s=e(".save_quiz_settings").attr("data-quiz");i.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.confirm({text:wplms_front_end_messages.create_question_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_question",security:e("#security").val(),title:a,quiz_id:s},cache:!1,success:function(t){i.closest(".new_question").html(t),i.closest(".new_question").removeClass("new_question"),e(".save_quiz_settings").removeClass("disabled")}})},cancel:function(){i.find("i").remove()},confirmButton:wplms_front_end_messages.create_question_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".curriculum .dropdown-menu .delete","click",function(t){t.preventDefault();var i=e(this),a=e("#course_id").val(),s=e(this).parent().parent().parent().parent(),n=s.find("h3.title").attr("data-id");console.log(n),e.confirm({text:wplms_front_end_messages.delete_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_curriculum",security:e("#security").val(),course_id:a,id:n},cache:!1,success:function(t){i.find("i").remove(),e.isNumeric(t)?s.remove():alert(t)}})},cancel:function(){i.find("i").remove()},confirmButton:wplms_front_end_messages.delete_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".dropdown-menu .remove","click",function(t){e(this).parent().parent().parent().parent().remove(),e("#save_course_curriculum").removeClass("disabled")}),e("body").delegate(".dropdown-menu .remove_new","click",function(t){e(this).parent().parent().parent().parent().parent().parent().remove(),e("#save_course_curriculum").removeClass("disabled")}),e("body").delegate("#save_course_curriculum","click",function(t){var i=e("#course_id").val(),a=e(this),s=a.html(),n=[];e("ul.curriculum li").each(function(){e(this).find("h3").each(function(){if(e(this).hasClass("title"))t={id:e(this).attr("data-id")};else var t={id:e(this).text()};n.push(t)}),e(this).find("select").each(function(){var t={id:e(this).val()};n.push(t)}),e(this).find("input.section").each(function(){var t={id:e(this).val()};n.push(t)})}),a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_curriculum",security:e("#security").val(),course_id:i,curriculum:JSON.stringify(n)},cache:!1,success:function(t){if(a.find("i").remove(),e.isNumeric(t)){var i=e("#course_creation_tabs li.active");i.removeClass("active"),e("#course_curriculum").removeClass("active"),e("#course_curriculum_help").removeClass("active"),i.addClass("done"),e("#course_creation_tabs li.done").next().addClass("active"),e("#course_pricing").addClass("active"),e("#course_pricing_help").addClass("active")}else a.html(t),setTimeout(function(){a.html(s)},2e3)}})},cancel:function(){a.find("i").remove()},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate("#vibe_product ","change",function(t){"add_new"==e(this).val()?e(".new_product").fadeIn(200):e(".new_product").fadeOut(200)}),e("body").delegate(".vibe_course_free ","click",function(t){"S"==e(".vibe_course_free:checked").val()?(e("#course_pricing > ul > li.course_product").fadeOut(200),e("#course_pricing > ul > li.course_membership").fadeOut(200),e("#course_pricing > ul > li.new_product").fadeOut(200)):(e("#course_pricing > ul > li.course_product").fadeIn(200),e("#course_pricing > ul > li.course_membership").fadeIn(200))}),e("body").delegate("#save_pricing ","click",function(t){var i=e("#course_id").val(),a={};a.vibe_course_free=e(".vibe_course_free:checked").val(),e("#vibe_product").length&&(a.vibe_product=e("#vibe_product").val(),a.vibe_subscription=e(".vibe_subscription:checked").val(),a.vibe_product_price=e("#product_price").val(),a.vibe_duration=e("#product_duration").val()),e("#vibe_pmpro_membership").length&&(a.vibe_pmpro_membership=e("#vibe_pmpro_membership").val()),e("#vibe_mycred_points").length&&(a.vibe_mycred_points=e("#vibe_mycred_points").val(),a.vibe_mycred_subscription=e(".vibe_mycred_subscription:checked").val(),a.vibe_mycred_duration=e("#vibe_mycred_duration").val()),e(".vibe_coming_soon").length&&(a.vibe_coming_soon=e(".vibe_coming_soon:checked").val());var s=[];e(".vibe_extras").each(function(){s.push({element:e(this).attr("id"),value:e(this).val()})});var n=e(this),c=n.html();e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_pricing",security:e("#security").val(),course_id:i,pricing:JSON.stringify(a),extras:JSON.stringify(s)},cache:!1,success:function(t){if(n.find("i").remove(),console.log(t),e.isNumeric(t)){var i=e("#course_creation_tabs li.active");i.removeClass("active"),e("#course_pricing").removeClass("active"),e("#course_pricing_help").removeClass("active"),i.addClass("done"),e("#course_creation_tabs li.done").next().addClass("active"),e("#course_live").addClass("active"),e("#course_live_help").addClass("active")}else n.html(t),setTimeout(function(){n.html(c)},2e3)}})},cancel:function(){n.find("i").remove()},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate("#publish_course","click",function(t){var i=e("#course_id").val(),a=e(this);a.html(),a.addClass("disable"),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"publish_course",security:e("#security").val(),course_id:i},cache:!1,success:function(e){a.find("i").remove(),a.after(e),a.fadeOut(200)}})},cancel:function(){a.find("i").remove()},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate("#offline_course","click",function(t){var i=e("#course_id").val(),a=e(this);a.html(),a.addClass("disable"),e.confirm({text:wplms_front_end_messages.course_offline,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"offline_course",security:e("#security").val(),course_id:i},cache:!1,success:function(e){a.find("i").remove(),a.after(e),a.fadeOut(200)}})},cancel:function(){a.find("i").remove()},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate("#delete_course","click",function(t){var i=e("#course_id").val(),a=e(this);a.html(),a.addClass("disable");var s=[];e(".delete_field:checked").each(function(){s.push({post_type:e(this).attr("data-posttype"),post_meta:e(this).attr("data-meta")})}),e.confirm({text:wplms_front_end_messages.delete_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_course",security:e("#security").val(),course_id:i,fields:JSON.stringify(s)},cache:!1,success:function(e){a.find("i").remove(),a.after(e),a.fadeOut(200)}})},cancel:function(){a.find("i").remove()},confirmButton:wplms_front_end_messages.delete_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate("#save_unit_settings","click",function(t){var i=e(this),a=i.attr("data-id"),s=i.attr("data-course"),n=i.html(),c=e("#vibe_type").val(),o=e(".vibe_free:checked").val(),r=e("#vibe_duration").val(),l=[];e("#assignments_list").length&&(e("#assignments_list li").each(function(){var t=e(this).attr("data-id");void 0!==t&&!1!==t&&l.push({id:t})}),vibe_assignment=e("#vibe_assignment").val());var d=[];e(".vibe_extras").each(function(){d.push({element:e(this).attr("id"),value:e(this).val()})});var u="";e("#vibe_forum").length&&(u=e("#vibe_forum").val()),i.addClass("disabled"),e.confirm({text:wplms_front_end_messages.save_unit_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_unit_settings",security:e("#security").val(),course_id:s,unit_id:a,vibe_type:c,vibe_free:o,vibe_duration:r,vibe_assignment:JSON.stringify(l),vibe_forum:u,extras:JSON.stringify(d)},cache:!1,success:function(e){i.find("i").remove(),i.removeClass("disabled"),i.html(e),setTimeout(function(){i.html(n)},2e3)}})},cancel:function(){i.find("i").remove()},confirmButton:wplms_front_end_messages.save_unit_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("#questions").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer"}),e("body").delegate("#add_question","click",function(t){var i=e("#hidden > li").clone();e("#questions").append(i),e("#questions").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer"}),e(".save_quiz_settings").addClass("disabled")}),e("body").delegate(".question","change",function(){"add_new"===e(this).val()?e(this).parent().find(".new_q").fadeIn(300):e(".save_quiz_settings").removeClass("disabled")}),e("body").delegate(".save_quiz_settings","click",function(t){var i=e(this);i.addClass("disabled");var a=i.attr("data-quiz"),s=i.html(),n=e("#vibe_subtitle").html(),c=e("#vibe_quiz_course").val(),o=e("#vibe_duration").val(),r=e(".vibe_quiz_auto_evaluate:checked").val(),l=e(".vibe_quiz_dynamic:checked").val(),d=e("#vibe_quiz_tags").val(),u=e("#vibe_quiz_number_questions").val(),_=e("#vibe_quiz_marks_per_question").val(),v=e("#vibe_quiz_retakes").val(),p=e(".vibe_quiz_randome:checked").val(),m=e("#vibe_quiz_message").html(),h=[];e(".vibe_extras").each(function(){h.push({element:e(this).attr("id"),value:e(this).val()})});var f,g,b=[];e("#questions > li").each(function(){f=e(this).find(".question").val(),g=e(this).find(".question_marks").val();var t={ques:f,marks:g};b.push(t)}),i.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.confirm({text:wplms_front_end_messages.save_quiz_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_quiz_settings",security:e("#security").val(),quiz_id:a,vibe_subtitle:n,vibe_quiz_course:c,vibe_duration:o,vibe_quiz_auto_evaluate:r,vibe_quiz_dynamic:l,vibe_quiz_tags:d,vibe_quiz_number_questions:u,vibe_quiz_marks_per_question:_,vibe_quiz_retakes:v,vibe_quiz_random:p,vibe_quiz_message:m,extras:JSON.stringify(h),questions:JSON.stringify(b)},cache:!1,success:function(e){i.find("i").remove(),i.html(e),setTimeout(function(){i.html(s),i.removeClass("disabled"),location.reload()},2e3)}})},cancel:function(){i.find("i").remove(),i.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_quiz_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate("#questions .dropdown-menu .delete","click",function(t){var i=e(this),a=e(this).parent().parent().parent().parent().find(".question").val(),s=e(this).parent().parent().parent().parent();e.confirm({text:wplms_front_end_messages.delete_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_question",security:e("#security").val(),id:a},cache:!1,success:function(t){i.find("i").remove(),e.isNumeric(t)?s.remove():alert(t)}})},cancel:function(){i.find("i").remove()},confirmButton:wplms_front_end_messages.delete_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("#vibe_question_type").change(function(t){var i=e(this).val();if("smalltext"===i||"largetext"===i)e("li.optionli").fadeOut(200);else{e("li.optionli").fadeIn(200);var a=e(".vibe_question_options");a.removeClass(),a.addClass("vibe_question_options"),a.addClass(i)}}),e(".vibe_question_options").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer",update:function(t,i){e(".vibe_question_options").trigger("update")}}),e("#add_option").click(function(t){var i=e(".hidden > li").clone();console.log(i),e(".vibe_question_options").append(i),e(".vibe_question_options").trigger("update")}),e(".vibe_question_options").on("update",function(){var t=0;e(this).find("li").each(function(){t=e(this).index(),e(this).find("span").text(t+1)})}),e("body").delegate(".vibe_question_options li > span","click",function(t){var i=e(this).parent();i.index(),e(".vibe_question_options").hasClass("single")&&(e(".vibe_question_options li").removeClass("selected"),i.addClass("selected"),e("#vibe_question_answer").trigger("update")),e(".vibe_question_options").hasClass("multiple")&&(i.hasClass("selected")?i.removeClass("selected"):(i.addClass("selected"),e("#vibe_question_answer").trigger("update"))),e(".vibe_question_options").hasClass("sort")}),e("#vibe_question_answer").on("update",function(){var t="";t=e(".vibe_question_options > li.selected").map(function(){return e(this).index()+1}).get().join(","),e("#vibe_question_answer").attr("value",t)}),e("body").delegate(".vibe_quiz_dynamic","click",function(){"S"===e(".vibe_quiz_dynamic:checked").val()?(e(".dynamic").fadeIn(200),e("#quiz_question_controls").fadeOut(200)):(e(".dynamic").fadeOut(200),e("#quiz_question_controls").fadeIn(200))}),e("#save_question_settings").click(function(t){var i=e(this),a=i.html(),s=e("#question_id").val(),n=e("#vibe_question_type").val(),c=e("#vibe_question_answer").val(),o=e("#vibe_question_hint").val(),r=e("#vibe_question_explaination").html(),l=[];i.addClass("disabled"),e(".vibe_question_options > li").each(function(){var t={option:e(this).find(".option").val()};l.push(t)}),e.confirm({text:wplms_front_end_messages.save_settings,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_question",security:e("#security").val(),id:s,vibe_question_type:n,vibe_question_options:JSON.stringify(l),vibe_question_answer:c,vibe_question_hint:o,vibe_question_explaination:r},cache:!1,success:function(e){i.find("i").remove(),i.removeClass("disabled"),i.html(e),setTimeout(function(){i.html(a)},2e3)}})},cancel:function(){i.find("i").remove(),i.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".rem","click",function(t){e(this).parent().remove(),e("#save_course_curriculum").removeClass("disabled"),e(".save_quiz_settings").removeClass("disabled"),e("#save_unit_settings").removeClass("disabled")}),e("body").delegate("#vibe_assignment","change",function(){var t;"add_new"===e(this).val()?(e("#save_unit_settings").addClass("disabled"),e("#assignment_link").addClass("hide")):(t=e("#vibe_assignment > option:selected").attr("data-link")+"?edit",e("#assignment_link").attr("href",t),e("#assignment_link").removeClass("hide"))}),e(".add_new_assignment").click(function(t){e(this).parent().next().show(200)}),e("body").delegate(".dropdown-menu .new_remove","click",function(t){e(this).parent().parent().parent().parent().fadeOut(200),e("#save_unit_settings").removeClass("disabled")}),e(".add_existing_assignment").click(function(){var t=e("#assignments_list li.hide").clone();e(t).removeClass("hide"),e("#assignments_list").append(t),e("#assignments_list select").on("change",function(){e(this).parent().parent().attr("data-id",e(this).val())})}),e("body").delegate(".new_assignment_actions .publish","click",function(t){var i=e("#save_unit_settings").attr("data-id"),a=e(this),s=a.closest(".new_assignment_actions").find(".new_assignment_title").val();a.prepend('<i class="icon-sun-stroke animated spin"></i>'),e.confirm({text:wplms_front_end_messages.create_assignment_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_assignment",security:e("#security").val(),unit_id:i,title:s,dataType:"json"},cache:!1,success:function(t){t=JSON.parse(t);var i=e("#assignments_list li.hide").clone();e(i).removeClass("hide"),e(i).attr("data-id",t.id),e(i).find("strong").html('<i class="icon-text-document"></i>'+t.title),e(i).find(".edit_unit").attr("href",t.link+"/edit"),e(i).find(".preview_unit").attr("href",t.link),console.log(i),e("#assignments_list").append(i),e("#save_unit_settings").removeClass("disabled"),e("#assignment_link").removeClass("hide"),e(".new_assignment_actions > li:last-child").fadeOut(200)}})},cancel:function(){a.find("i").remove(),e("#save_course_curriculum").removeClass("disabled")},confirmButton:wplms_front_end_messages.create_assignment_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e(".vibe_assignment_evaluation").click(function(){var t=e(".vibe_assignment_evaluation:checked").val();e("#assignment_course").removeClass("hide"),"S"===t?e("#assignment_course").fadeIn(200):e("#assignment_course").fadeOut(200)}),e("#vibe_assignment_submission_type").change(function(){"textarea"===e(this).val()?e("#attachment_type").fadeOut(200):e("#attachment_type").fadeIn(200)}),e("#save_assignment_settings").click(function(t){var i=e(this),a=i.html(),s=e("#assignment_id").val(),n=e("#vibe_subtitle").text(),c=e("#vibe_assignment_marks").val(),o=e("#vibe_assignment_duration").val(),r=e(".vibe_assignment_evaluation:checked").val(),l=e("#vibe_assignment_course").val(),d=e("#vibe_assignment_submission_type").val(),u=e("#vibe_attachment_size").val(),_=[];e("#vibe_attachment_type option:selected").each(function(t,i){_[t]=e(i).val()}),i.addClass("disabled"),e.confirm({text:wplms_front_end_messages.save_settings,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_assignment_settings",security:e("#assignment_security").val(),assignment_id:s,vibe_subtitle:n,vibe_assignment_marks:c,vibe_assignment_duration:o,vibe_assignment_evaluation:r,vibe_assignment_course:l,vibe_assignment_submission_type:d,vibe_attachment_type:JSON.stringify(_),vibe_attachment_size:u},cache:!1,success:function(e){i.find("i").remove(),i.html(e),setTimeout(function(){i.html(a)},2e3),i.removeClass("disabled")}})},cancel:function(){i.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_confirm_button,cancelButton:vibe_course_module_strings.cancel})})}),jQuery(document).ready(function(e){function t(t,i){e.ajax({type:"POST",url:ajaxurl,async:!0,data:{action:"set_template_for_course",security:e("#security").val(),course_id:t,template_id:i},cache:!1})}function i(t,i){i=i||0,e.each(t,function(t,a){0==a.visibility?(e("body").find("#"+a.section).addClass("hide_cc_element"),e("body").find("."+a.section).addClass("hide_cc_element")):(e("body").find("#"+a.section).removeClass("hide_cc_element"),e("body").find("."+a.section).removeClass("hide_cc_element")),e.each(a.fields,function(t,a){if(0==a.visibility?e("body").find(".vibe_"+a.id).addClass("hide_cc_element"):e("body").find(".vibe_"+a.id).removeClass("hide_cc_element"),null!=a.value&&void 0!==a.value&&0==i)switch(a.type){case"text":case"number":case"duration":case"date":e(".edit_course_content.content").find('[data-id="'+a.id+'"]').val(a.value),e(".edit_course_content.content").find('[data-id="'+a.id+'"]').trigger("change");break;case"switch":case"yesno":case"conditionalswitch":case"reverseconditionalswitch":"H"==a.value?(e(".edit_course_content.content").find("#"+a.id+"H").prop("checked","checked"),e(".edit_course_content.content").find("#"+a.id+"H").trigger("click")):(e(".edit_course_content.content").find("#"+a.id+"S").prop("checked","checked"),e(".edit_course_content.content").find("#"+a.id+"S").trigger("click"));break;case"date":e(".edit_course_content.content").find('[data-id="'+a.id+'"]').val(a.value);break;case"editor":e(".edit_course_content.content").find("#"+a.id).val(a.value),e(".edit_course_content.content").find("#"+a.id).hasClass("wp-editor-area")&&"true"==e(".edit_course_content.content").find("#"+a.id).attr("aria-hidden")&&tinymce.editors[a.id].setContent(a.value);break;case"select":case"selectmulticpt":case"selectcpt":case"multiselect":if(e(".edit_course_content.content").find('[data-id="'+a.id+'"]').hasClass("select2-hidden-accessible")&&(e(".edit_course_content.content").find('[data-id="'+a.id+'"]').hasClass("select2")||e(".edit_course_content.content").find('[data-id="'+a.id+'"]').hasClass("chosen"))){var s=e(".edit_course_content.content").find('[data-id="'+a.id+'"]:not(.cc_field)').data("select2").options.options;e(".edit_course_content.content").find('[data-id="'+a.id+'"]:not(.cc_field)').select2("destroy"),a.value.constructor===Array?e.each(a.value,function(t,i){e(".edit_course_content.content").find('[data-id="'+a.id+'"]:not(.cc_field)').html('<option value="'+i.id+'" selected="selected">'+i.text+"</option>")}):e(".edit_course_content.content").find('[data-id="'+a.id+'"]:not(.cc_field)').append('<option value="'+data.id+'" selected="selected">'+data.text+"</option>"),e(".edit_course_content.content").find('[data-id="'+a.id+'"]:not(.cc_field)').select2(s)}else e(".edit_course_content.content").find('[data-id="'+a.id+'"]').val(a.value)}})})}e(".wplms-taxonomy select").change(function(t){var i=e(this).parent().parent().find(".wplms-new-taxonomy");"new"===e(this).val()?i.addClass("animate cssanim fadeIn load"):i.removeClass("animate cssanim fadeIn load")}),e(".select2").each(function(){e(this).hasClass("select2-hidden-accessible")||e(this).hasClass("selectcpt")||(e(this).is("[multiple]")?e(this).select2():e(this).select2({allowClear:!0}))}),e(".chosen").select2({allowClear:!0}),e(".vibe_vibe_group h3>span,.vibe_vibe_forum h3>span").click(function(){e(this).parent().next().toggle(200)}),e(".toggle_vibe_post_content").click(function(){e(".vibe_post_content").toggle(200)}),e(".vibe_vibe_group .more").click(function(){e(".select_group_form,.new_group_form").hide(),e(this).next().toggle(200)}),e(".vibe_vibe_forum .more").click(function(){e(".select_forum_form,.new_forum_form").hide(),e(this).next().toggle(200)}),e(".vibe_vibe_product h3>span").click(function(){var t=e(this).attr("class");e("#edit_product,#change_product").hide(100),e("#"+t).toggle(200)}),e(".vibe_vibe_product .more").click(function(){e(".select_product_form,.new_product_form").hide(),e(this).next().toggle(200)}),e(".clear_input").on("click",function(){var t=e(this).attr("data-id");e("#"+t).length&&(e("#"+t).val(""),e(this).next().html(e(this).find(".hide").html()),e(".course_components").trigger("active"),e(".course_pricing").trigger("reactive"))}),e(".course_components").on("active",function(){e(".vibe_vibe_group h3>span,.vibe_vibe_forum h3>span").unbind("click"),e(".vibe_vibe_group h3>span,.vibe_vibe_forum h3>span").click(function(){e(this).parent().next().toggle(200)}),e(".vibe_vibe_group .more").unbind("click"),e(".vibe_vibe_group .more").click(function(){e(".select_group_form,.new_group_form").hide(),e(this).next().toggle(200)}),e(".vibe_vibe_forum .more").unbind("click"),e(".vibe_vibe_forum .more").click(function(){e(".select_forum_form,.new_forum_form").hide(),e(this).next().toggle(200)}),e(".clear_input").on("click",function(){var t=e(this).attr("data-id");e("#"+t).length&&(e("#"+t).val(""),e(this).next().html(e(this).find(".hide").html()),e(".course_components").trigger("active"))})}),e(".course_pricing").on("active",function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"get_product",security:e("#security").val(),course_id:e("#course_id").val()},cache:!1,success:function(t){e("#edit_product").html(t)}}),e(".vibe_vibe_product h3>span").unbind("click"),e(".vibe_vibe_product h3>span").click(function(){var t=e(this).attr("class");e("#edit_product,#change_product").hide(100),e("#"+t).toggle(200)}),e(".vibe_vibe_product .more").unbind("click"),e(".vibe_vibe_product .more").click(function(){e(".select_product_form,.new_product_form").hide(),e(this).next().toggle(200)}),e(".clear_input").on("click",function(){var t=e(this).attr("data-id");e("#"+t).length&&(e("#"+t).val(""),e(this).next().html(e(this).find(".hide").html()),e(".course_pricing").trigger("reactive"))})}),e(".course_pricing").on("reactive",function(){e(".vibe_vibe_product h3>span").unbind("click"),e(".vibe_vibe_product h3>span").click(function(){var t=e(this).attr("class");e("#edit_product,#change_product").hide(100),e("#"+t).toggle(200)}),e(".vibe_vibe_product .more").unbind("click"),e(".vibe_vibe_product .more").click(function(){e(".select_product_form,.new_product_form").hide(),e(this).next().toggle(200)})}),e("#course_creation_tabs").on("increment",function(){var t=e(this).find("li.active");t.removeClass("active"),t.removeClass("done");var i=t.attr("class");t.addClass("done"),e("#"+i).removeClass("active");var a=t.next().attr("class");if(e("#"+a).addClass("active"),e("#"+a).trigger("active"),t.next().addClass("active"),t.next().hasClass("hide_cc_element"))return e("#course_creation_tabs").trigger("increment"),!1;e("body,html").animate({scrollTop:0},1200),e("#"+a).find(".wp-editor-area").each(function(){var e=jQuery(this).attr("id"),t="#wp-"+e+"-wrap",i=jQuery(t),a=tinyMCE.get(e);a&&i.hasClass("tmce-active")&&a.save()})}),e('select[data-type="duration"]').on("change",function(){var t=e(this).attr("data-id"),i=e(this).find("option:selected").text();e('span[data-connect="'+t+'"]').text(i)}),e('input[data-id="post_title"]').on("keyup",function(){e("#create_course_button").removeClass("disabled"),e('input[data-id="post_title"]').removeClass("error")}),e("#create_course_button").on("click",function(){var t=e(this),i=t.html();e('input[data-id="post_title"]').val().length<1&&(t.addClass("disabled"),e('input[data-id="post_title"]').addClass("error")),t.hasClass("disabled")||"save_course_button"==t.attr("id")||(t.addClass("disabled"),e("body").trigger("modal_open"),tinyMCE.triggerSave(),e.confirm({text:wplms_front_end_messages.create_course_confirm,confirm:function(){var a=[];e("#create_course").each(function(){e(this).find(".post_field").each(function(){if(e(this).is(":checkbox")&&e(this).is(":checked").each(function(){e(this).attr("data-id"),e(this).attr("data-type"),e(this).val()}),e(this).is(":radio")){var t=e(this).attr("class");e("."+t+":checked").each(function(){e(this).attr("data-id"),e(this).attr("data-type"),e(this).val()})}if(e(this).is("select")&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("input")&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))var i={id:e(this).attr("id"),type:e(this).attr("data-type"),value:e(this).val()};a.push(i)})}),e.ajax({type:"POST",url:ajaxurl,data:{action:"new_create_course",security:e("#security").val(),settings:JSON.stringify(a)},cache:!1,success:function(a){e.isNumeric(a)?(e("#course_id").val(a),e("#create_course_button").attr("id","save_course_button").removeClass("disabled"),e("#course_creation_tabs>ul").addClass("islive"),e("#course_creation_tabs").trigger("increment")):(t.html(a),setTimeout(function(){t.html(i)},5e3),t.removeClass("disabled"))}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.create_course_confirm_button,cancelButton:vibe_course_module_strings.cancel}))}),e(document).on("click","#save_course_button",function(){var t=e(this),i=t.html();t.addClass("disabled"),e("body").trigger("modal_open"),tinyMCE.triggerSave(),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){var a=[];e("#create_course").each(function(){e(this).find(".post_field").each(function(){if(e(this).is(":checkbox")&&e(this).is(":checked").each(function(){e(this).attr("data-id"),e(this).attr("data-type"),e(this).val()}),e(this).is(":radio")){var t=e(this).attr("class");e("."+t+":checked").each(function(){e(this).attr("data-id"),e(this).attr("data-type"),e(this).val()})}if(e(this).is("select")&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("input")&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))if(e(this).hasClass("wp-editor-area"))i={id:e(this).attr("id"),type:e(this).attr("name"),value:e(this).val()};else var i={id:e(this).attr("id"),type:e(this).attr("data-type"),value:e(this).val()};a.push(i)})}),e.ajax({type:"POST",url:ajaxurl,data:{action:"new_save_course",security:e("#security").val(),course_id:e("#course_id").val(),settings:JSON.stringify(a)},cache:!1,success:function(a){t.removeClass("disabled"),e.isNumeric(a)?e("#course_creation_tabs").trigger("increment"):(t.html(a),setTimeout(function(){t.html(i)},5e3))}})},cancel:function(){console.log("checks"),t.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("#save_course_settings_button").on("click",function(){var t=e(this),i=t.html();t.addClass("disabled"),e("body").trigger("modal_open");var a=[];e("#course_settings").find(".post_field").each(function(){if(e(this).is(":checkbox:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is(":radio:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("select")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="text"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="hidden"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="number"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))if(e(this).hasClass("wp-editor-area"))tinyMCE.triggerSave(),e(this).attr("id"),t={id:e(this).attr("id"),type:e(this).attr("name"),value:e(this).val()};else var t={id:e(this).attr("data-id"),type:e(this).attr("name"),value:e(this).val()};a.push(t)}),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"new_save_course_settings",security:e("#security").val(),course_id:e("#course_id").val(),settings:JSON.stringify(a)},cache:!1,success:function(a){t.removeClass("disabled"),e.isNumeric(a)?e("#course_creation_tabs").trigger("increment"):(t.html(a),setTimeout(function(){t.html(i)},5e3))}})},cancel:function(){t.removeClass("disabled")},post:!0,confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e("#save_course_components_button").on("click",function(){var t=e(this),i=t.html();t.addClass("disabled"),e("body").trigger("modal_open");var a=[];e("#course_components").find(".post_field").each(function(){if(e(this).is(":checkbox:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is(":radio:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("select")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="text"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="number"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="hidden"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))if(e(this).hasClass("wp-editor-area"))tinyMCE.triggerSave(),e(this).attr("id"),t={id:e(this).attr("id"),type:e(this).attr("name"),value:e(this).val()};else var t={id:e(this).attr("data-id"),type:e(this).attr("name"),value:e(this).val()};a.push(t)}),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"new_save_course_components",security:e("#security").val(),course_id:e("#course_id").val(),settings:JSON.stringify(a)},cache:!1,success:function(a){t.removeClass("disabled"),e.isNumeric(a)?e("#course_creation_tabs").trigger("increment"):(t.html(a),setTimeout(function(){t.html(i)},5e3))}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e(".data_links .edit").on("click",function(){var t=e(this);console.log(jQuery.active),t.hasClass("disabled")||(t.addClass("disabled"),t.html(),t.closest("div.active").css("opacity","0.6"),t.closest("div.active").append('<div id="ajaxloader"></div>'),e.ajax({type:"POST",url:ajaxurl,data:{action:"get_element",security:e("#security").val(),course_id:e("#course_id").val(),element_id:t.parent().parent().parent().find(".title").attr("data-id")},cache:!1,success:function(i){var a;e("#ajaxloader").remove(),t.removeClass("disabled"),t.closest("div.active").css("opacity","1"),e("#course_curriculum").hasClass("active")?a=e("#course_curriculum"):e("#events").hasClass("active")&&(a=e("#events")),e(".date_box").datepicker(),a.append(i);var s=a.find(".element_overlay").outerHeight()+60;a.css("height",s+"px"),a.css("overflow-y","scroll"),a.trigger("active"),e(".element_overlay .tip").tooltip(),e(".element_overlay .close-pop").click(function(){e(this).parent().remove()}),e(".add_cpt .more").click(function(t){e(".select_existing_cpt,.new_cpt").hide(),e(this).next().toggle(200)}),e(".accordion_trigger").on("click",function(){e(this).parent().toggleClass("open"),e(".vibe_vibe_quiz_tags .select2").select2({allowClear:!0})})}}))}),e(".data_links .preview").on("click",function(){var t=e(this);t.html(),e.ajax({type:"POST",url:ajaxurl,data:{action:"preview_element",security:e("#security").val(),course_id:e("#course_id").val(),element_id:t.parent().parent().parent().find(".title").attr("data-id")},cache:!1,success:function(t){var i;e("#course_curriculum").hasClass("active")?i=e("#course_curriculum"):e("#events").hasClass("active")&&(i=e("#events")),i.append(t);var a=i.find(".element_overlay").outerHeight()+60;i.css("height",a+"px"),i.css("overflow-y","scroll"),i.trigger("active"),e(".element_overlay .close-pop").click(function(){e(this).parent().remove()}),e(".accordion_trigger").on("click",function(){e(this).parent().toggleClass("open")})}})}),e(".data_links .remove").on("click",function(){e(this).closest(".data_links").closest("li").remove()}),e(".data_links .delete").on("click",function(){var t=e(this);if(!t.hasClass("disabled")){t.addClass("disabled"),e("body").trigger("modal_open");var i=e(this).closest(".data_links").parent().find(".title").attr("data-id");e.confirm({text:wplms_front_end_messages.delete_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_element",security:e("#security").val(),id:i},cache:!1,success:function(i){t.removeClass("disabled"),e.isNumeric(i)&&t.closest(".data_links").parent("li").remove()}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.delete_confirm_button,cancelButton:vibe_course_module_strings.cancel})}}),e("#save_pricing_button").on("click",function(){var t=e(this),i=t.html();t.addClass("disabled"),e("body").trigger("modal_open");var a=[];e("#course_pricing").find(".post_field").each(function(){if(!e(this).closest(".select_product_form").length&&!e(this).closest(".new_product_form").length){if(e(this).is(":checkbox:checked")&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is(":radio:checked")&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("select"))if(e(this).is("select[multiple]")){var t={};e(this).find("option:selected").each(function(i,a){t[i]=e(a).val()}),i={id:e(this).attr("data-id"),value:t}}else i={id:e(this).attr("data-id"),value:e(this).val()};if(e(this).is('input[type="text"]')&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="number"]')&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="hidden"]')&&(i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))if(e(this).hasClass("wp-editor-area"))tinyMCE.triggerSave(),e(this).attr("id"),i={id:e(this).attr("id"),type:e(this).attr("name"),value:e(this).val()};else var i={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()};a.push(i)}}),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"new_save_pricing",security:e("#security").val(),course_id:e("#course_id").val(),settings:JSON.stringify(a)},cache:!1,success:function(a){t.removeClass("disabled"),e.isNumeric(a)?e("#course_creation_tabs").trigger("increment"):(t.html(a),setTimeout(function(){t.html(i)},5e3))}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel})}),e(".selectgroup").select2({minimumInputLength:4,placeholder:e(this).attr("data-placeholder"),closeOnSelect:!0,allowClear:!0,language:{inputTooShort:function(){return vibe_course_module_strings.enter_more_characters}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(t){return{action:"get_front_groups",security:e("#security").val(),q:t}},processResults:function(e){return{results:e}},cache:!0}}),e(".selectforum").select2({minimumInputLength:4,placeholder:e(this).attr("data-placeholder"),closeOnSelect:!0,allowClear:!0,language:{inputTooShort:function(){return vibe_course_module_strings.enter_more_characters}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(t){return{action:"get_forums",security:e("#security").val(),q:t}},processResults:function(e){return{results:e}},cache:!0}}),e(".use_selected").on("click",function(){var t=e(this).parent().find("select").val(),i=(e(this).parent().find("select option").text(),e(this).parent().parent().parent().parent());i.find('input[type="hidden"]').val(t);var a=e(this).parent().attr("class");e.ajax({type:"POST",url:ajaxurl,data:{action:"get_permalink",security:e("#security").val(),type:a,id:t},cache:!1,success:function(t){i.find("h3").html(""),i.find("h3").html(t),e(".course_components").trigger("active")}}),i.find("h3>span").trigger("click")}),e(".selectcpt.select2").each(function(){var t=e(this).attr("data-cpt"),i=e(this).attr("data-status"),a=e(this).attr("data-placeholder");e(this).select2({minimumInputLength:4,placeholder:a,closeOnSelect:!0,allowClear:!0,language:{inputTooShort:function(){return vibe_course_module_strings.enter_more_characters}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(a){return{action:"get_select_cpt",security:e("#security").val(),cpt:t,stats:i,q:a}},processResults:function(e){return{results:e}},cache:!0}})}),e(".use_selected_product").on("click",function(){var t=e(this);if(!t.hasClass("disabled")){t.addClass("disabled"),e("body").trigger("modal_open");var i=e(this).parent().find("select").val();e.ajax({type:"POST",url:ajaxurl,data:{action:"set_product",security:e("#security").val(),course_id:e("#course_id").val(),product_id:i},cache:!1,success:function(i){t.removeClass("disabled"),e("#course_pricing .vibe_vibe_product>h3").html(i),e("#change_product,#edit_product").hide(),e(".course_pricing").trigger("active")}})}}),e("#create_new_product").on("click",function(t){var i=e(this);if(!i.hasClass("disabled")){i.addClass("disabled"),e("body").trigger("modal_open"),e(this).parent(),e(this).text();var a=[],s=e("#course_id").val();e(".new_product_form").find(".post_field").each(function(){if(e(this).is(":checkbox:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is(":radio:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("select")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="text"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="number"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="hidden"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))var t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()};a.push(t)}),e.ajax({type:"POST",url:ajaxurl,data:{action:"create_new_product",security:e("#security").val(),course_id:s,settings:JSON.stringify(a)},cache:!1,success:function(t){i.removeClass("disabled"),e("#course_pricing .vibe_vibe_product>h3").html(t),e("#change_product,#edit_product").hide(),e(".course_pricing").trigger("active")}})}}),e(document).on("click","#edit_course_product",function(t){var i=e(this);if(!i.hasClass("disabled")){i.addClass("disabled"),e("body").trigger("modal_open"),e(this).parent(),e(this).text();var a=[],s=e("#course_id").val();e("#edit_product").find(".post_field").each(function(){if(e(this).is(":checkbox:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is(":radio:checked")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("select")&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="text"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="number"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="hidden"]')&&(t={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))if(e(this).hasClass("wp-editor-area"))t={id:e(this).attr("id"),type:e(this).attr("name"),value:e(this).val()};else var t={id:e(this).attr("data-id"),type:e(this).attr("name"),value:e(this).val()};a.push(t)}),e.ajax({type:"POST",url:ajaxurl,data:{action:"create_new_product",security:e("#security").val(),course_id:s,settings:JSON.stringify(a)},cache:!1,success:function(t){i.removeClass("disabled"),e("#course_pricing .vibe_vibe_product>h3").html(t),e("#change_product,#edit_product").hide(),e(".course_pricing").trigger("active")}})}}),e("#create_new_group").on("click",function(){var t=e(this),i=t.text();t.hasClass("disabled")||(t.addClass("disabled"),e("body").trigger("modal_open"),e.confirm({text:wplms_front_end_messages.create_group_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_group",security:e("#security").val(),course_id:e("#course_id").val(),title:e("#vibe_group_name").val(),privacy:e("#vibe_group_privacy").val(),description:e("#vibe_group_description").val()},cache:!1,success:function(a){if(t.removeClass("disabled"),e.isNumeric(a)){e("#vibe_group").val(a),e(".vibe_vibe_group>.field_wrapper>h3>span").html();var s=a;e.ajax({type:"POST",url:ajaxurl,data:{action:"get_permalink",security:e("#security").val(),type:"group",id:s},cache:!1,success:function(t){e(".vibe_vibe_group>.field_wrapper>h3").html(t),e(".course_components").trigger("active")}}),e(".vibe_vibe_group>.field_wrapper>h3>span").trigger("click")}else t.html(a),setTimeout(function(){t.html(i)},2e3)}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.create_group_confirm_button,cancelButton:vibe_course_module_strings.cancel}))}),e("#create_new_forum").on("click",function(){var t=e(this),i=t.text();t.hasClass("disabled")||(t.addClass("disabled"),e("body").trigger("modal_open"),e.confirm({text:wplms_front_end_messages.create_forum_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"create_forum",security:e("#security").val(),course_id:e("#course_id").val(),title:e("#vibe_forum_name").val(),privacy:e("#vibe_forum_privacy").val(),description:e("#vibe_forum_description").val()},cache:!1,success:function(a){if(t.removeClass("disabled"),e.isNumeric(a)){e("#vibe_forum").val(a),e(".vibe_vibe_forum>.field_wrapper>h3>span").html();var s=a;e.ajax({type:"POST",url:ajaxurl,data:{action:"get_permalink",security:e("#security").val(),type:"forum",id:s},cache:!1,success:function(t){e(".vibe_vibe_forum>.field_wrapper>h3").html(t),e(".course_components").trigger("active")}}),e(".vibe_vibe_forum>.field_wrapper>h3>span").trigger("click")}else t.html(a),setTimeout(function(){t.html(i)},2e3)}})},cancel:function(){t.find("i").remove(),t.removeClass("disabled")},confirmButton:wplms_front_end_messages.create_group_confirm_button,cancelButton:vibe_course_module_strings.cancel}))}),e("#save_course_curriculum_button").on("click",function(){var t=e("#course_id").val(),i=e(this),a=i.html(),s=[];e(this).hasClass("disabled")||(e("ul.curriculum > li").each(function(){if(e(this).hasClass("new_section"))t=e(this).find("input.section").length?e(this).find("input.section").val():e(this).find("strong").text();else var t=e(this).find("strong.title").attr("data-id");if(void 0!==t){var i={id:t};s.push(i)}}),i.addClass("disabled"),e("body").trigger("modal_open"),e.confirm({text:wplms_front_end_messages.save_course_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_course_curriculum",security:e("#security").val(),course_id:t,curriculum:JSON.stringify(s)},cache:!1,success:function(t){i.removeClass("disabled"),e.isNumeric(t)?e("#course_creation_tabs").trigger("increment"):(i.html(t),setTimeout(function(){i.html(a)},2e3))}})},cancel:function(){i.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_course_confirm_button,cancelButton:vibe_course_module_strings.cancel}))}),e("#course_curriculum").on("active",function(){e(".trigger_new_product").unbind("click"),e(".trigger_new_product").on("click",function(){e(".new_product").toggle(200)}),e("#save_course_curriculum_button").removeClass("disabled"),e(".select_existing").unbind("click"),e(".select_existing").on("click",function(){e(this).parent().find(".existing").toggle(200)}),e(".select_new").unbind("click"),e(".select_new").on("click",function(){e(this).parent().find(".new_actions").toggle(200)}),e(".tip").tooltip(),e(".add_cpt .more").unbind("click"),e(".add_cpt .more").click(function(t){e(".select_existing_cpt,.new_cpt").hide(),e(this).next().toggle(200)}),e(".wplms-taxonomy select").change(function(t){var i=e(this).parent().parent().find(".wplms-new-taxonomy");"new"===e(this).val()?i.addClass("animate cssanim fadeIn load"):i.removeClass("animate cssanim fadeIn load")}),e("ul.curriculum").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer"}),e(".add_dynamic_question_tag").unbind("click"),e(".add_dynamic_question_tag").on("click",function(){var t=e(this),i=t.parent().find("ul.post_field > li").length;void 0===i&&(i=0),t.parent().find(".hidden_block select").attr("data-id",t.parent().find(".hidden_block select").attr("data-id")+"["+i+"][]"),t.parent().find(".hidden_block input").attr("data-id",t.parent().find(".hidden_block input").attr("data-id")+"["+i+"]");var a=t.parent().find(".hidden_block").html();t.parent().find("ul.post_field").append("<li>"+a+"</li>"),t.parent().find("ul.post_field").find("select").select2(),e("#vibe_quiz_tags input").on("change",function(){var t=parseInt(0),i=parseInt(0);e("#vibe_quiz_tags input.count").each(function(){var i=parseInt(e(this).val());"NAN"!=i&&""!=i||(i=parseInt(0)),t+=i}),e("#vibe_quiz_tags input.marks").each(function(t,a){var s=parseInt(e(this).val()),n=e(this).parent().find("input.count").val();"NAN"!=n&&""!=n||(n=parseInt(0)),"NAN"!=s&&""!=s||(s=parseInt(0)),i+=s*n}),e("#total_question_count").text(t),e("#total_question_marks").text(i)}),e(".remove_tag").on("click",function(){e(this).parent().remove()})}),e("#vibe_quiz_tags input").on("change",function(){var t=parseInt(0),i=parseInt(0);e("#vibe_quiz_tags input.count").each(function(){var i=parseInt(e(this).val());"NAN"!=i&&""!=i||(i=parseInt(0)),t+=i}),e("#vibe_quiz_tags input.marks").each(function(t,a){var s=parseInt(e(this).val()),n=e(this).parent().find("input.count").val();"NAN"!=n&&""!=n||(n=parseInt(0)),"NAN"!=s&&""!=s||(s=parseInt(0)),i+=s*n}),e("#total_question_count").text(t),e("#total_question_marks").text(i)}),e(".remove_tag").on("click",function(){e(this).parent().remove()}),e(".selectcpt.select2").each(function(){if(!e(this).hasClass("select2-hidden-accessible")){var t=e(this).attr("data-cpt"),i=e(this).attr("data-placeholder"),a=e(this).attr("data-status");e(this).select2({minimumInputLength:4,placeholder:i,closeOnSelect:!0,allowClear:!0,language:{inputTooShort:function(){return vibe_course_module_strings.enter_more_characters}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(i){return{action:"get_select_cpt",security:e("#security").val(),cpt:t,status:a,q:i}},processResults:function(e){return{results:e}},cache:!0}})}}),e("#save_element_button").unbind("click"),e("#save_element_button").on("click",function(t){var i=e(this),a=i.html();if(!i.hasClass("disabled")){i.addClass("disabled");var s,n=[];s=i.parent().hasClass("question_edit_settings_content")?".question_edit_settings_content":i.parent().hasClass("wplms-assignment_edit_settings_content")?".wplms-assignment_edit_settings_content":".element_overlay",e(s).find(".post_field").each(function(){if(e(this).is(":radio:checked")&&(o={id:e(this).attr("name"),value:e(this).val()}),e(this).is("select")&&(e(this).is("select[multiple]")?(s={},e(this).find("option:selected").each(function(t,i){s[t]=e(i).val()}),o={id:e(this).attr("data-id"),value:s}):o={id:e(this).attr("data-id"),value:e(this).val()}),e(this).hasClass("repeatable"))if(e(this).is("#vibe_quiz_tags")){var t={},i={},a={};e("#vibe_quiz_tags > li").each(function(s,n){var c={};e(this).find('input[type="hidden"]').each(function(t,i){c[t]=e(this).val()}),e(this).find("select").length&&(c=e(this).find("select").val()),i[s]=e(this).find('input[type="text"].count').val(),a[s]=e(this).find('input[type="text"].marks').val(),t[s]=c}),o={id:e(this).attr("data-id"),value:{tags:t,numbers:i,marks:a}}}else s={},e(this).find("li").each(function(t,i){s[t]=e(this).find("input").val()}),o={id:e(this).attr("data-id"),value:s};if(e(this).hasClass("list-group-questions")){var s={},a={},c={};e(this).find(".question_block").each(function(t,i){s[t]=e(this).find(".question_id").val(),a[t]=e(this).find(".question_marks").val()}),c={ques:s,marks:a},o={id:e(this).attr("data-id"),value:c}}if(e(this).hasClass("list-group-assignments")&&(s={},e(this).find(".assignment_block").each(function(t,i){s[t]=e(this).find(".assignment_id").val()}),o={id:e(this).attr("data-id"),value:s}),e(this).is('input[type="text"]')&&(o={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is('input[type="number"]')&&(o={id:e(this).attr("data-id"),type:e(this).attr("name"),value:e(this).val()}),e(this).is('input[type="hidden"]')&&(o={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(this).val()}),e(this).is("textarea"))if(e(this).hasClass("wp-editor-area"))tinyMCE.triggerSave(),o={id:e(this).attr("id"),type:e(this).attr("name"),value:e(this).val()};else var o={id:e(this).attr("data-id"),type:e(this).attr("name"),value:e(this).val()};n.push(o)}),e.confirm({text:wplms_front_end_messages.save_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"save_element",security:e("#security").val(),id:i.attr("data-id"),course_id:e("#course_id").val(),settings:JSON.stringify(n)},cache:!1,success:function(e){i.removeClass("disabled"),i.html(e),setTimeout(function(){i.html(a)},5e3)}})},cancel:function(){i.removeClass("disabled")},confirmButton:wplms_front_end_messages.save_confirm_button,cancelButton:vibe_course_module_strings.cancel})}}),e(".edit_sub").unbind("click"),e(".edit_sub").on("click",function(t){t.preventDefault();var i=e(this),a=i.parent().parent().parent();a.hasClass("loaded")&&a.toggle("collapse"),i.hasClass("disabled")||(e(".question_edit_settings_content").remove(),i.addClass("disabled"),a.css("opacity","0.6"),a.append('<div id="ajaxloader"></div>'),e("#save_element_button").addClass("disabled"),e.ajax({type:"POST",url:ajaxurl,data:{action:"get_sub_element",security:e("#security").val(),id:a.find('input[type="hidden"]').val()},cache:!1,success:function(t){i.removeClass("disabled"),a.hasClass("loaded"),a.css("opacity","1"),a.find("#ajaxloader").remove(),a.append(t),e("#course_curriculum").trigger("active"),e("select.chosen[multiple]").select2()}}))}),e(".preview_sub").unbind("click"),e(".preview_sub").on("click",function(t){t.preventDefault();var i=e(this),a=i.parent().parent().parent();a.hasClass("loaded")&&a.toggle("collapse"),i.hasClass("disabled")||(i.addClass("disabled"),e.ajax({type:"POST",url:ajaxurl,data:{action:"preview_sub_element",security:e("#security").val(),id:a.find('input[type="hidden"]').val()},cache:!1,success:function(t){i.removeClass("disabled"),a.hasClass("loaded"),a.append(t),e("#course_curriculum").trigger("question_loaded")}}))}),e(".remove_sub").unbind("click"),e(".remove_sub").on("click",function(){e(this).parent().parent().parent().remove()}),e(".delete_sub").unbind("click"),e(".delete_sub").on("click",function(){var t=e(this);if(!t.hasClass("disabled")){t.addClass("disabled");var i=e(this).closest(".data_links").parent().find(".title").attr("data-id");e.confirm({text:wplms_front_end_messages.delete_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_element",security:e("#security").val(),id:i},cache:!1,success:function(i){t.removeClass("disabled"),e.isNumeric(i)&&t.closest(".data_links").parent().remove()}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.delete_confirm_button,cancelButton:vibe_course_module_strings.cancel})}}),e("#close_element_button").unbind("click"),e("#close_element_button").click(function(){e(this).parent().hide(200).remove(),e("#save_element_button").removeClass("disabled")}),e("ul.repeatable").sortable({revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer",update:function(t,i){e(this).trigger("update")}}),e("ul.repeatable").on("update",function(){if(!e(this).is("#vibe_quiz_tags")){var t=0;e(this).find("li").each(function(){t=e(this).index(),e(this).find("span").text(t+1)})}}),e(".add_repeatable_count_option").on("click",function(){var t=e("ul.hidden >li").clone();t="<li><span>"+(e(this).next().find("li").length+1)+"</span>"+t.html()+"</li>",e(this).next().append(t),e("#course_curriculum").trigger("question_loaded")}),e(".list-group-questions").sortable({item:".question_block",handle:".dashicons-sort",revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer"}),e(".use_selected_question").unbind("click"),e(".use_selected_question").on("click",function(){var t=e(this).parent().find(".selectcpt option:selected").val(),i=e(this).parent().find(".selectcpt option:selected").text(),a=e(".list-group-questions .hidden_block").clone();a.find(".title").text(i).attr("data-id",t),a.find(".question_id").val(t),a.find(".question_marks").val("0"),a.removeClass("hide").removeClass("hidden_block").addClass("question_block"),a.insertBefore(".list-group-questions .hidden_block"),e(".select_existing_cpt,.new_cpt").hide(),e("#course_curriculum").trigger("active")}),e(document).on("click","#create_new_question",function(t){var i=e(this);if(!i.hasClass("disabled")){i.addClass("disabled");var a=e(this).parent(),s=e(this).text(),n=a.find("#vibe_question_title").val();e.ajax({type:"POST",url:ajaxurl,data:{action:"create_new_question",security:e("#security").val(),title:n,question_tag:e("#question-tag-select").val(),new_question_tag:e("#new_question_tag").val(),template:a.find("#vibe_question_template").val()},cache:!1,success:function(t){if(i.removeClass("disabled"),e.isNumeric(t)){var c=e(".list-group-item.hidden_block").clone();c.find(".title").text(n).attr("data-id",t),c.find(".question_id").val(t),c.find(".question_marks").val("0"),c.removeClass("hide").removeClass("hidden_block").addClass("question_block"),c.insertBefore(".list-group-questions .hidden_block"),a.find("#vibe_question_title").val(""),e("#new_question_tag").val(""),e(".select_existing_cpt,.new_cpt").hide(),e("#course_curriculum").trigger("active")}else i.html(t),setTimeout(function(){i.html(s)},5e3)}})}}),e(".list-group-assignments").sortable({item:".assignment_block",handle:".dashicons-sort",revert:!0,cursor:"move",refreshPositions:!0,opacity:.6,scroll:!0,containment:"parent",placeholder:"placeholder",tolerance:"pointer"}),e(".use_selected_assignment").unbind("click"),e(".use_selected_assignment").on("click",function(){var t=e(this).parent().find(".selectcpt option:selected").val(),i=e(this).parent().find(".selectcpt option:selected").text(),a=e(".hidden_block").clone();a.find(".title").text(i).attr("data-id",t),a.find(".assignment_id").val(t),a.removeClass("hide").removeClass("hidden_block").addClass("assignment_block"),a.insertBefore(".list-group-assignments .hidden_block"),e(".remove_sub").on("click",function(){e(this).parent().parent().parent().remove()}),e("#course_curriculum").trigger("active")}),e(document).on("click","#create_new_assignment",function(t){var i=e(this);if(!i.hasClass("disabled")){i.addClass("disabled");var a=e(this).parent(),s=e(this).text(),n=a.find("#vibe_assignment_title").val();e.ajax({type:"POST",url:ajaxurl,data:{action:"create_new_assignment",security:e("#security").val(),cpt:"wplms-assignment",title:n},cache:!1,success:function(t){if(i.removeClass("disabled"),e.isNumeric(t)){var c=e(".hidden_block").clone();c.find(".title").text(n).attr("data-id",t),c.find(".assignment_id").val(t),c.removeClass("hide").removeClass("hidden_block").addClass("assignment_block"),c.insertBefore(".list-group-assignments .hidden_block"),a.find("#vibe_assignment_title").val(""),e(".remove_sub").on("click",function(){e(this).parent().parent().parent().remove()}),e("#course_curriculum").trigger("active")}else i.html(t),setTimeout(function(){i.html(s)},5e3)}})}}),e(".data_links .edit").unbind("click"),e(".data_links .edit").on("click",function(){var t=e(this);t.html(),console.log(jQuery.active),t.hasClass("disabled")||(t.addClass("disabled"),t.closest("div.active").css("opacity","0.6"),t.closest("div.active").append('<div id="ajaxloader"></div>'),e.ajax({type:"POST",url:ajaxurl,data:{action:"get_element",security:e("#security").val(),course_id:e("#course_id").val(),element_id:t.parent().parent().parent().find(".title").attr("data-id")},cache:!1,success:function(i){e("#ajaxloader").remove(),t.removeClass("disabled"),t.closest("div.active").css("opacity","1");var a;e("#course_curriculum").hasClass("active")?a=e("#course_curriculum"):e("#events").hasClass("active")&&(a=e("#events")),a.append(i);var s=a.find(".element_overlay").outerHeight()+60;a.css("height",s+"px"),a.css("overflow-y","scroll"),a.trigger("active"),e(".element_overlay .close-pop").click(function(){e(this).parent().remove()}),e(".add_cpt .more").click(function(t){e(".select_existing_cpt,.new_cpt").hide(),e(this).next().toggle(200)}),e(".accordion_trigger").on("click",function(){e(this).parent().toggleClass("open"),e(".vibe_vibe_quiz_tags .select2").select2({allowClear:!0})})}}))}),e(".data_links .preview").unbind("click"),e(".data_links .preview").on("click",function(){var t=e(this);t.html(),e.ajax({type:"POST",url:ajaxurl,data:{action:"preview_element",security:e("#security").val(),course_id:e("#course_id").val(),element_id:t.parent().parent().parent().find(".title").attr("data-id")},cache:!1,success:function(t){var i;e("#course_curriculum").hasClass("active")?i=e("#course_curriculum"):e("#events").hasClass("active")&&(i=e("#events")),i.append(t);var a=i.find(".element_overlay").outerHeight()+60;i.css("height",a+"px"),i.css("overflow-y","scroll"),i.trigger("active"),e(".element_overlay .close-pop").click(function(){e(this).parent().remove()}),e(".accordion_trigger").on("click",function(){e(this).parent().toggleClass("open")})}})}),e(".data_links .remove").unbind("click"),e(".data_links .remove").on("click",function(){e(this).closest(".data_links").closest("li").remove()}),e(".data_links .delete").unbind("click"),e(".data_links .delete").on("click",function(){var t=e(this);if(!t.hasClass("disabled")){t.addClass("disabled");var i=e(this).closest(".data_links").parent().find(".title").attr("data-id");e.confirm({text:wplms_front_end_messages.delete_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_element",security:e("#security").val(),id:i},cache:!1,success:function(i){t.removeClass("disabled"),e.isNumeric(i)&&t.closest(".data_links").parent("li").remove()}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.delete_confirm_button,cancelButton:vibe_course_module_strings.cancel})}})}),e("#course_curriculum").on("question_loaded",function(){e("#close_element_button").click(function(){e(this).parent().hide(200).remove(),e("#save_element_button").addClass("disabled")})}),e("body").delegate("#add_course_section","click",function(t){var i=e("#hidden_base .new_section").clone();e("ul.curriculum").append(i),e("#course_curriculum").trigger("add_section")}),e("#add_course_unit").on("click",function(t){var i=e("#hidden_base .new_unit").clone().attr("id","id"+Math.floor(100*Math.random()));return e("#save_course_curriculum_button").addClass("disabled"),i.find(".select_existing_cpt select").addClass("selectcurriculumcpt"),i.find('input[name="name"]').attr("name","name"+Math.floor(100*Math.random())).val("").attr("id","uid"+Math.floor(100*Math.random())),e("ul.curriculum").append(i),e("#course_curriculum").trigger("add_section"),!1}),e("#add_course_quiz").on("click",function(t){var i=e("#hidden_base .new_quiz").clone().attr("id","id"+Math.floor(100*Math.random()));return i.find(".select_existing_cpt select").addClass("selectcurriculumcpt"),i.find('input[name="name"]').attr("name","name"+Math.floor(100*Math.random())),e("ul.curriculum").append(i),e("#course_curriculum").trigger("add_section"),!1}),e("#course_curriculum").on("add_section",function(){e(".add_cpt .more").click(function(t){e(".select_existing_cpt,.new_cpt").hide(),e(this).next().toggle(200)}),e(".selectcurriculumcpt").each(function(){if(!e(this).hasClass("select2-hidden-accessible")){var t=e(this).attr("data-cpt"),i=e(this).attr("data-placeholder");e(this).select2({minimumInputLength:4,placeholder:i,allowClear:!0,closeOnSelect:!0,language:{inputTooShort:function(){return vibe_course_module_strings.enter_more_characters}},ajax:{url:ajaxurl,type:"POST",dataType:"json",delay:250,data:function(i){return{action:"get_select_cpt",security:e("#security").val(),cpt:t,q:i}},processResults:function(e){return{results:e}},cache:!0}})}}),e(".use_selected_curriculum").on("click",function(){var t=e(this),i=e("#hidden_base").prev().clone(),a=e(this).parent().find(".selectcurriculumcpt").val(),s=e(this).parent().find(".selectcurriculumcpt option:selected").text();e(i).find(".title > span").text(s),e(i).find(".title").attr("data-id",a),e(i).find('input[name="name"]').attr("name","name"+Math.floor(100*Math.random()));var n=i.html();e(".vibe_vibe_course_curriculum ul.curriculum").append(n),t.closest(".new_unit").remove(),t.closest(".new_quiz").remove(),e("#course_curriculum").trigger("active")}),e(".create_new_curriculum").on("click",function(){var t=e(this);if(!t.hasClass("disabled")){var i=t.text(),a=e(this).parent().find(".vibe_curriculum_title").val();t.addClass("disabled"),e("body").trigger("modal_open"),e.ajax({type:"POST",url:ajaxurl,data:{action:"create_new_curriculum",security:e("#security").val(),title:a,cpt:t.parent().find(".vibe_cpt").val()},cache:!1,success:function(s){if(t.removeClass("disabled"),e.isNumeric(s)){var n=e("#hidden_base").prev().clone();e(n).find(".title > span").text(a),e(n).find(".title").attr("data-id",s),s=n.html(),e(".vibe_vibe_course_curriculum ul.curriculum").append(s),t.closest(".new_unit").remove(),t.closest(".new_quiz").remove(),e("#course_curriculum").trigger("active"),e("#close_element_button").click(function(){e(this).parent().hide(200).remove()})}else t.html(s),setTimeout(function(){t.html(i)},5e3)}})}})});var a="",s="";s=void 0!==e("#course_id")&&"undefined"!=e("#course_id").val()&&null!=e("#course_id").val()&&""!=e("#course_id").val()?"applied":"",a+='<div id="create_course_templates_wrapper_make_height"></div><div id="create_course_templates_wrapper" class="'+s+'">        <a id="create_course_templates_wrapper_close"><i class="fa fa-times"></i></a>        <div class="container-fluid"><div class="row">            <div class="col-md-6">            <a id="create_fresh_course" class="button course_template_button">'+wplms_front_end_messages.create_your_own+'</a>            </div>            <div class="col-md-6">            <a id="upload_course" class="button course_template_button">'+wplms_front_end_messages.upload_package+'</a>            </div>        </div><div class="row">',"undefined"!=typeof saved_course_templates&&Object.keys(saved_course_templates).length>0&&(a+='<h3 class="heading center"><span>'+wplms_front_end_messages.saved_c_templates+"</span></h3>",e.each(saved_course_templates,function(e,t){a+='<div class="col-md-3 col-sm-6 course_template_item"><div class="course_template" data-id="'+e+'"><h3>'+t.name+"</h3><p>"+t.desc+'</p></div><span class="delete_course_template"></span></div>'})),a+="</div></div></div>";var n=e("body").find("#course_creation_tabs li.course_curriculum").html();if("undefined"!=typeof course_existing_template_id&&null!=course_existing_template_id)if("upload_course"==course_existing_template_id){if("undefined"!=typeof upload_course_json&&null!=upload_course_json&&(i(upload_course_json,1),e("body").find("#course_curriculum article ul.course_curriculum").addClass("hide_cc_element"),e("body").find("#course_curriculum article .upload_course_wrapper").removeClass("hide_cc_element"),e("body").find("#course_curriculum article .upload_course_wrapper").length<=0&&"undefined"!=typeof plupload_wrapper)){e("body").find("#course_curriculum article").append(plupload_wrapper);var c='<i class="fa fa-upload"></i><a href="#course_curriculum">'+wplms_front_end_messages.upload_package+"<span></span></a>";e("body").find("#course_creation_tabs li.course_curriculum").html(c),e("body").trigger("upload_course_trigger")}}else if("undefined"!=typeof saved_course_templates&&null!=saved_course_templates){var o="";e.each(saved_course_templates,function(e,t){e==course_existing_template_id&&(o=t)}),i(o.template_data,1)}e("body").find("a.view_package").attr("href",e("body").find(".existing_packages_select").val()),e("body").delegate(".existing_packages_select","change",function(){e("body").find("a.view_package").attr("href",e("body").find(".existing_packages_select").val())}),e("body").delegate(".use_package","click",function(){var t=e(this);if(t.hasClass("disabled"))return!1;t.addClass("disabled"),e.confirm({text:wplms_front_end_messages.set_course_package_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"set_course_package",security:e("body").find("#course_package").val(),course_id:e("body").find("#course_id").val(),package_path:e("body").find(".existing_packages_select").val(),package_name:e("body").find(".existing_packages_select option:selected").text()},cache:!1,success:function(i){t.removeClass("disabled");var a='<div class="existing_course_package"><strong>'+e("body").find(".existing_packages_select option:selected").text()+'</strong>                        <a title="'+wplms_front_end_messages.remove_this_package+'" href="javascript:void(0)" class="button small remove_course_package right" data-package-name="'+e("body").find(".existing_packages_select option:selected").text()+'" data-package-path="'+e("body").find(".existing_packages_select").val()+'"><i class="fa fa-remove"></i></a>                        <a title="'+wplms_front_end_messages.view_this_package+'" href="'+e("body").find(".existing_packages_select").val()+'" target="_blank" class="button small right"><i class="fa fa-eye"></i></a>                        </div>';e("body").find(".existing_course_package_wrapper").html(a)}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.yes,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".remove_package","click",function(){var t=e(this);if(t.hasClass("disabled"))return!1;t.addClass("disabled"),e.confirm({text:wplms_front_end_messages.delete_course_package_confirm,confirm:function(){var i=e("body").find(".existing_packages_select").val();e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_course_package",security:e("body").find("#course_package").val(),course_id:e("body").find("#course_id").val(),package_path:i,package_name:e("body").find(".existing_packages_select option:selected").text()},cache:!1,success:function(a){e('.existing_packages_select option[value="'+i+'"]').each(function(){e(this).remove()}),t.removeClass("disabled")}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.yes,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".remove_course_package","click",function(){var t=e(this);if(t.hasClass("disabled"))return!1;t.addClass("disabled"),e.confirm({text:wplms_front_end_messages.remove_course_package_confirm,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"remove_course_package",security:e("body").find("#course_package").val(),course_id:e("body").find("#course_id").val(),package_path:t.data("package-path"),package_name:t.data("package-name")},cache:!1,success:function(e){t.parent().remove(),t.removeClass("disabled")}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.yes,cancelButton:vibe_course_module_strings.cancel})}),e("body").delegate(".existing_packages_select","change",function(){e("body").find("a.view_package").attr("href",e("body").find(".existing_packages_select").val())}),e.when(e("#create_course_wrapper").append(a)).then(function(){setTimeout(function(){var t=e("#create_course_templates_wrapper .container").outerHeight(!0);e("#create_course_templates_wrapper_make_height").height(t)},500),"undefined"!=typeof course_existing_template_id&&null!=course_existing_template_id&&e('[data-id="'+course_existing_template_id+'"]').addClass("active"),e("body").delegate(".delete_course_template","click",function(){var t=e(this);if(t.hasClass("disabled"))return!1;t.addClass("disabled"),e.confirm({text:wplms_front_end_messages.delete_this_template,confirm:function(){e.ajax({type:"POST",url:ajaxurl,data:{action:"delete_course_template",security:e("#security").val(),template_id:t.parent().find(".course_template").data("id")},cache:!1,success:function(e){t.removeClass("disabled"),t.closest(".course_template_item").fadeOut(200).remove()}})},cancel:function(){t.removeClass("disabled")},confirmButton:wplms_front_end_messages.yes,cancelButton:vibe_course_module_strings.cancel})}),e("#create_fresh_course").on("click",function(){void 0!==n&&""!=n&&e("body").find("#course_creation_tabs li.course_curriculum").html(n),void 0!==e("#course_id")&&"undefined"!=e("#course_id").val()&&null!=e("#course_id").val()&&""!=e("#course_id").val()&&e.ajax({type:"POST",url:ajaxurl,async:!0,data:{action:"remove_template_for_course",security:e("#security").val(),course_id:e("#course_id").val()},cache:!1}),e.each(e("body").find(".course_template"),function(){e(this).removeClass("active")}),e("body").find("#course_curriculum article .upload_course_wrapper").addClass("hide_cc_element"),e("body").find("#course_curriculum article ul.course_curriculum").removeClass("hide_cc_element"),e("#create_course_templates_wrapper").addClass("applied")}),e("#upload_course").on("click",function(){e("#create_course_templates_wrapper").addClass("applied"),"undefined"!=typeof upload_course_json&&null!=upload_course_json&&i(upload_course_json),e("body").find("#course_curriculum article ul.course_curriculum").addClass("hide_cc_element"),e("body").find("#course_curriculum article .upload_course_wrapper").removeClass("hide_cc_element");var a='<i class="fa fa-upload"></i><a href="#course_curriculum">'+wplms_front_end_messages.upload_package+"<span></span></a>";e("body").find("#course_creation_tabs li.course_curriculum").html(a),e("body").find("#course_curriculum article .upload_course_wrapper").length<=0&&"undefined"!=typeof plupload_wrapper&&(e("body").find("#course_curriculum article").append(plupload_wrapper),e("body").find(".existing_packages_select").select2(),e("body").trigger("upload_course_trigger")),e("#create_course ul.create_course").append('<input type="hidden" data-id="vibe_course_template" data-type="meta" class="post_field course_template_id" value="upload_course">'),void 0!==e("#course_id")&&null!=e("#course_id").val()&&"undefined"!=e("#course_id").val()&&""!=e("#course_id").val()&&t(e("#course_id").val(),"upload_course"),e.each(e("body").find(".course_template"),function(){e(this).removeClass("active")})}),e(".course_template").click(function(){var a=e(this);e.confirm({text:wplms_front_end_messages.apply_template_confirm,confirm:function(){e.each(e("body").find(".course_template"),function(){e(this).removeClass("active")}),a.addClass("active"),void 0!==n&&""!=n&&e("body").find("#course_creation_tabs li.course_curriculum").html(n),e("body").find("#course_curriculum article .upload_course_wrapper").addClass("hide_cc_element"),e("#create_course_templates_wrapper").addClass("applied"),template_id=a.data("id");var s="";"undefined"!=typeof saved_course_templates&&null!=saved_course_templates&&e.each(saved_course_templates,function(e,t){e==template_id&&(s=t)}),e("#create_course ul.create_course").append('<input type="hidden" data-id="vibe_course_template" data-type="meta" class="post_field course_template_id" value="'+template_id+'">'),void 0!==e("#course_id")&&null!=e("#course_id").val()&&"undefined"!=e("#course_id").val()&&""!=e("#course_id").val()&&t(e("#course_id").val(),template_id),i(s.template_data),"undefined"!=typeof course_creation_template&&null!=course_creation_template&&e.each(course_creation_template,function(t,i){e("."+t).hasClass("active")&&(e("."+t).removeClass("active"),e("#"+t).removeClass("active"))}),e("div#course_creation_tabs li.create_course").addClass("active"),e(".edit_course_content #create_course").addClass("active")},cancel:function(){a.removeClass("disabled")},confirmButton:wplms_front_end_messages.yes,cancelButton:vibe_course_module_strings.cancel})})}),e("a#create_course_templates_popop_button").on("click",function(){e("#create_course_templates_wrapper").toggleClass("applied")}),e("#create_course_templates_wrapper_close").on("click",function(){e("#create_course_templates_wrapper").toggleClass("applied")}),e("#save_course_creation_template").on("click",function(){var t="";t='<div id="save_cc_template_wrap"><span class="close_save_cc_template"><i class="fa fa-times fa-2"></i></span><h3 class="heading center"><span>'+wplms_front_end_messages.save_c_template+'</span></h3><p class="notice_to_save_cours_template">'+wplms_front_end_messages.c_template_name_message+"</p><ul >",e.each(course_creation_template,function(i,a){"create_course"!=i&&"course_live"!=i&&(t+='<li class="section_li save_cc_template_'+i+'">',t+='<h3 class="heading section_title_e_d section_hide"><small></small><span>'+a.title,t+='<div class="checkbox"><input type="checkbox" class="save_cc_section_name" name="save_cc_'+i+'" data-id="'+i+'" value="1" id="save_cc_'+i+'"><label for="save_cc_'+i+'"></label></div></span></h3><ul class="save_cc_fields section_settings_hide">',e.each(a.fields,function(e,i){"button"!=i.type&&"heading"!=i.type&&(t+="<li>"+function(e){return"<strong>"+e.label+'</strong><div class="checkbox"><input type="checkbox" name="save_cc_'+e.id+'" data-id="'+e.id+'" data-type="'+e.type+'" class="cc_field" value="1" id="save_cc_'+e.id+'"><label for="save_cc_'+e.id+'"></label></div>'}(i)+"</li>")}),t+="</ul></li>")}),t+='</ul><div class="save_course_template_form"><input type="text" placeholder="'+wplms_front_end_messages.c_template_name+'" class="save_cc_template_name_field">        <textarea type="text" placeholder="'+wplms_front_end_messages.c_template_desc+'" class="save_cc_template_desc_field"></textarea></div>        <a class="button full save_cc_template">'+wplms_front_end_messages.save_c_template_button+"</a></div>",e("#course_live").append(t),e('[name^="save_cc"]').prop("checked","checked"),e("#course_live").trigger("save_cc_dom_loaded")}),e("body").delegate(".close_save_cc_template","click",function(){e(this).parent().remove()}),e("#course_live").on("save_cc_dom_loaded",function(){e(".save_cc_template").click(function(t){if(t.preventDefault(),e(this).hasClass("disabled_c_t"))return!1;var i=[],a=[];if(e("#save_cc_template_wrap").find(".section_li").each(function(){var t=e(this),s=[];if(t.find(".cc_field").each(function(){if(void 0!==e(this).val()&&e(this).is(":checked"))t=1;else var t=0;var i=e(".edit_course_content.content").find("#"+e(this).attr("data-id")+":not(.cc_field)").attr("data-uploader-button-text"),a=e(".edit_course_content.content").find('[data-id="'+e(this).attr("data-id")+'"]:not(.cc_field)');if(!a.is("input")||a.is(":checkbox")||a.is(":radio"))a.is(":checkbox")?a.is(":checked")&&(n={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:a.val(),visibility:t}):n=a.is("select")?a.hasClass("select2-hidden-accessible")&&(a.hasClass("select2")||a.hasClass("chosen"))?{id:e(this).attr("data-id"),type:e(this).data("type"),value:a.select2("data"),visibility:t}:{id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:a.val(),visibility:t}:a.is(":radio")?{id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(".edit_course_content.content").find('[data-id="'+e(this).attr("data-id")+'"]:checked:not(.cc_field)').val(),visibility:t}:e(".edit_course_content.content").find("#"+e(this).attr("data-id")).is("textarea")?e(".edit_course_content.content").find("#"+e(this).attr("data-id")).hasClass("wp-editor-area")&&"true"==e(".edit_course_content.content").find("#"+e(this).attr("data-id")).attr("aria-hidden")?{id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:tinymce.editors[e(this).attr("data-id")].getContent(),visibility:t}:{id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(".edit_course_content.content").find("#"+e(this).attr("data-id")).val(),visibility:t}:void 0!==i&&!1!==i?{id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(".edit_course_content.content").find("#"+e(this).attr("data-id")).val(),visibility:t}:{id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:a.val(),visibility:t};else var n={id:e(this).attr("data-id"),type:e(this).attr("data-type"),value:e(".edit_course_content.content").find('[data-id="'+e(this).attr("data-id")+'"]').val(),visibility:t};s.push(n)}),void 0!==t.find(".save_cc_section_name").val()&&t.find(".save_cc_section_name").is(":checked"))n=1;else var n=0;a={section:e(this).find(".save_cc_section_name").attr("data-id"),visibility:n,fields:s},i.push(a)}),console.log(i),template_name=e("input.save_cc_template_name_field").val(),template_desc=e("textarea.save_cc_template_desc_field").val(),"undefined"==typeof template_name||""==template_name||null==template_name)return alert(wplms_front_end_messages.warning_template_name),!1;var s=e(this).text();e(this).text(wplms_front_end_messages.saving),e(this).addClass("disabled_c_t"),e.ajax({type:"POST",url:ajaxurl,data:{action:"save_course_template",security:e("body").find("#security").val(),template_name:template_name,template_desc:template_desc,template_data:JSON.stringify(i)},cache:!1,success:function(t){e(".save_cc_template").text(t),setTimeout(function(){e(".save_cc_template").text(s),e(".save_cc_template").removeClass("disabled_c_t")},5e3)}})}),e("h3.heading.section_title_e_d small").on("click",function(){var t=e(this);t.closest(".section_li").find(".save_cc_fields").toggleClass("section_settings_hide"),t.toggleClass("section_hide")})})});